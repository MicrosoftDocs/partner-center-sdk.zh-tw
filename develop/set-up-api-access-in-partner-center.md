---
title: 在合作夥伴中心設定 API 存取
description: 設定帳戶以針對合作夥伴中心 SDK 進行開發，並在整合沙箱中進行測試。
ms.assetid: 182A6831-6F00-4762-9A86-327BF87EA6AC
ms.date: 05/29/2019
ms.service: partner-dashboard
ms.subservice: partnercenter-sdk
ms.localizationpriority: medium
ms.openlocfilehash: d253583b1d207d17a46d692910276a8529f9626d
ms.sourcegitcommit: 89cdf326f5684fb447d91d817f32dfcbf08ada3a
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/25/2020
ms.locfileid: "82157810"
---
# <a name="set-up-api-access-in-partner-center"></a>在合作夥伴中心設定 API 存取

**適用於：**

- 合作夥伴中心
- 由 21Vianet 營運的合作夥伴中心
- Microsoft Cloud for US Government 適用的合作夥伴中心
- Microsoft Cloud 德國合作夥伴中心

本文將說明針對合作夥伴中心 SDK 進行開發所需的帳戶。 本文也會說明如何建立[整合沙箱帳戶](#integration-sandbox-account)，並在整合沙箱中進行測試。

## <a name="account-definitions"></a>帳戶定義

為了協助您整合和測試 API 整合，合作夥伴中心支援兩種帳戶：

### <a name="primary-partner-account"></a>主要合作夥伴帳戶

此帳戶可讓您建立真實客戶的實際訂單。 如果您在登入主要帳戶時，使用合作夥伴中心 SDK 或合作夥伴儀表板 UI 進行任何變更或交易，系統會將其視為真實客戶的正式訂單。 這些變更或交易會反映在您的發票中，而您的公司需負責支付費用。

### <a name="integration-sandbox-account"></a>整合沙箱帳戶

此帳戶會用來測試程式碼，以及其與合作夥伴中心 API 的整合，然後再進行廣泛部署。 您登入整合沙箱帳戶時所進行的變更和交易，將不會出現在您的發票中。

整合沙箱帳戶和主要帳戶會獨立運作，而且不會共用系統管理員帳戶、使用者帳戶、客戶、訂單、訂用帳戶或其他資料。

整合沙箱支援數量有限的客戶、訂單、訂用帳戶和基座等等的交易。

根據原則，整合沙箱帳戶僅供整合測試之用。

但預設中沒有整合沙箱帳戶。 如果您打算使用合作夥伴中心 SDK，您必須自行建立一個整合沙箱帳戶。

## <a name="set-up-your-accounts"></a>設定您的帳戶

本節將說明如何設定主要合作夥伴帳戶，以及合作夥伴中心 SDK 的整合沙箱帳戶。

### <a name="create-an-integration-sandbox"></a>建立整合沙箱

1. 使用全域系統管理員帳戶 (您的主要夥伴帳戶) 登入合作夥伴儀表板。

2. 從 [設定]  功能表 (齒輪圖示) 中，選擇 [合作夥伴設定]  。

3. 在 [帳戶設定]  頁面上，選擇 [整合沙箱]  。

    >[!NOTE]
    >如果您沒有看到 [整合沙箱] 選項，可能是您沒有全域管理員帳戶。 也有可能是您正在使用整合沙箱帳戶，而且已設定整合沙箱。

4. 輸入整合沙箱管理帳戶的連絡人資訊。 然後，選擇 [建立帳戶]  。 等候幾分鐘的時間，直到出現確認已建立帳戶的確認訊息。

5. 查看確認訊息之後，請登出合作夥伴儀表板。

6. 使用新的整合沙箱管理帳戶重新登入。 請務必使用格式為 **username@domain** 的認證及您剛才指定的密碼。

7. 在 [目前的工作]  **上方選擇 [設定帳戶]** 來完成沙箱帳戶設定。

### <a name="enable-api-access"></a>啟用 API 存取

設定帳戶之後，您必須先啟用 API 存取，才能搭配整合沙箱使用合作夥伴中心 SDK。 您必須針對主要夥伴帳戶和整合沙箱帳戶，分別啟用 API 的存取權。

1. 使用全域系統管理員帳戶登入合作夥伴儀表板。

2. 從 [設定]  功能表 (齒輪圖示) 中，選取 [合作夥伴設定]  。

3. 在 [帳戶設定]  頁面上，選擇 [應用程式管理]  。

4. 如果您沒有現有的應用程式，請新增 Web 應用程式。 如果您有現有的 Web 應用程式，請選擇 [新增金鑰]  按鈕。

5. 複製應用程式註冊資訊，特別是**金鑰** (如果您要建立 Web 應用程式的話)，並將其儲存在安全的地方。

6. 登出合作夥伴儀表板。

7. 使用您的整合沙箱帳戶重新登入。 重複步驟 2-5，以在整合沙箱中啟用 API 存取。

## <a name="write-and-test-code"></a>撰寫和測試程式碼

您可以在整合沙箱中撰寫程式碼和測試程式碼。 您將需要下列資訊來透過 Azure AD [設定合作夥伴中心驗證](partner-center-authentication.md)。

| 項目名稱 | 項目位置 |
| --------- | ------------- |
| 應用程式識別碼/用戶端識別碼 | 從 [設定]  功能表 (齒輪圖示) 中，選取 [合作夥伴設定]  。 在 [帳戶設定]  頁面上，選取 [應用程式管理]  。 應用程式識別碼/用戶端識別碼會列為 [已註冊應用程式的應用程式識別碼]  。 |
| 按鍵 | 如果您已在[啟用 API 存取](#enable-api-access)一節中建立 Web 應用程式，這就是您在步驟 5 儲存的金鑰。 |
| 網域 | 整合沙箱的網域。 |

## <a name="run-tested-code"></a>執行測試過的程式碼

若要搭配實際的客戶資料來使用解決方案，您必須將整合沙箱認證變更為主要合作夥伴帳戶認證。

當您準備好在主要合作夥伴帳戶中使用已測試的程式碼時，您必須取得 Azure AD 安全性權杖。 此安全性權杖會以您合作夥伴中心的應用程式、金鑰和網域為基礎 (而不是您整合沙箱的應用程式、金鑰和網域)。

1. 遵循[合作夥伴中心驗證](partner-center-authentication.md)中的步驟，使用主要合作夥伴中心認證來取得 Azure AD 安全性權杖。 (您先前已遵循這些步驟來取得整合沙箱的 Azure AD 安全性權杖)。

2. 將程式碼中的整合安全性權杖取代為主要合作夥伴帳戶的新安全性權杖。
